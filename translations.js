const translations = {
  en: {
    title: "STACK MASTER",
    score: "SCORE",
    best: "BEST",
    combo: "COMBO",
    easy: "EASY",
    medium: "MEDIUM",
    hard: "HARD",
    start: "START",
    gameOver: "GAME OVER",
    maxCombo: "MAX COMBO",
    accuracy: "ACCURACY",
    restart: "RESTART",
    perfect: "PERFECT!",
    great: "GREAT!",
    good: "GOOD",
    poor: "POOR",
    settings: "SETTINGS",
    sound: "Sound",
    particles: "Particles",
    aiMode: "AI Mode",
    effects: "Effects",
    back: "BACK",
    developer: "DEVELOPER",
    devMode: "Dev Mode",
    infinite: "Infinite Blocks",
    disableCss: "Disable CSS",
    godMode: "God Mode",
    zeroG: "Zero Gravity",
    resetScores: "Reset Scores",
    instantWin: "Instant Win"
  },
  es: {
    title: "STACK MASTER",
    score: "PUNTUACIÓN",
    best: "MEJOR",
    combo: "COMBO",
    easy: "FÁCIL",
    medium: "MEDIO",
    hard: "DIFÍCIL",
    start: "COMENZAR",
    gameOver: "GAME OVER",
    maxCombo: "MÁX COMBO",
    accuracy: "PRECISIÓN",
    restart: "REINICIAR",
    perfect: "PERFECTO!",
    great: "GENIAL!",
    good: "BIEN",
    poor: "MAL",
    settings: "AJUSTES",
    sound: "Sonido",
    particles: "Partículas",
    aiMode: "Modo IA",
    effects: "Efectos",
    back: "VOLVER",
    developer: "DEVELOPER",
    devMode: "Modo Dev",
    infinite: "Bloques Infinitos",
    disableCss: "Desactivar CSS",
    godMode: "Modo Dios",
    zeroG: "Gravedad Cero",
    resetScores: "Resetear Puntos",
    instantWin: "Victoria Instantánea"
  },
  fr: {
    title: "STACK MASTER",
    score: "SCORE",
    best: "MEILLEUR",
    combo: "COMBO",
    easy: "FACILE",
    medium: "MOYEN",
    hard: "DIFFICILE",
    start: "COMMENCER",
    gameOver: "GAME OVER",
    maxCombo: "COMBO MAX",
    accuracy: "PRÉCISION",
    restart: "REDÉMARRER",
    perfect: "PARFAIT!",
    great: "SUPER!",
    good: "BIEN",
    poor: "MAUVAIS",
    settings: "PARAMÈTRES",
    sound: "Son",
    particles: "Particules",
    aiMode: "Mode IA",
    effects: "Effets",
    back: "RETOUR",
    developer: "DEVELOPER",
    devMode: "Mode Dev",
    infinite: "Blocs Infinis",
    disableCss: "Désactiver CSS",
    godMode: "Mode Dieu",
    zeroG: "Gravité Zéro",
    resetScores: "Réinitialiser",
    instantWin: "Victoire Instantanée"
  },
  de: {
    title: "STACK MASTER",
    score: "PUNKTZAHL",
    best: "BESTE",
    combo: "COMBO",
    easy: "EINFACH",
    medium: "MITTEL",
    hard: "SCHWER",
    start: "STARTEN",
    gameOver: "GAME OVER",
    maxCombo: "MAX COMBO",
    accuracy: "GENAUIGKEIT",
    restart: "NEUSTART",
    perfect: "PERFEKT!",
    great: "GROßARTIG!",
    good: "GUT",
    poor: "SCHLECHT",
    settings: "EINSTELLUNGEN",
    sound: "Ton",
    particles: "Partikel",
    aiMode: "KI-Modus",
    effects: "Effekte",
    back: "ZURÜCK",
    developer: "DEVELOPER",
    devMode: "Dev Modus",
    infinite: "Unendliche Blöcke",
    disableCss: "CSS Deaktivieren",
    godMode: "Gott Modus",
    zeroG: "Null Schwerkraft",
    resetScores: "Punkte Zurücksetzen",
    instantWin: "Sofortiger Sieg"
  },
  pt: {
    title: "STACK MASTER",
    score: "PONTUAÇÃO",
    best: "MELHOR",
    combo: "COMBO",
    easy: "FÁCIL",
    medium: "MÉDIO",
    hard: "DIFÍCIL",
    start: "COMEÇAR",
    gameOver: "GAME OVER",
    maxCombo: "MÁX COMBO",
    accuracy: "PRECISÃO",
    restart: "REINICIAR",
    perfect: "PERFEITO!",
    great: "ÓTIMO!",
    good: "BOM",
    poor: "RUIM",
    settings: "CONFIGURAÇÕES",
    sound: "Som",
    particles: "Partículas",
    aiMode: "Modo IA",
    effects: "Efeitos",
    back: "VOLTAR",
    developer: "DESENVOLVEDOR",
    devMode: "Modo Dev",
    infinite: "Blocos Infinitos",
    disableCss: "Desativar CSS",
    godMode: "Modo Deus",
    zeroG: "Gravidade Zero",
    resetScores: "Zerar Pontos",
    instantWin: "Vitória Instantânea"
  },
  it: {
    title: "STACK MASTER",
    score: "PUNTEGGIO",
    best: "MIGLIORE",
    combo: "COMBO",
    easy: "FACILE",
    medium: "MEDIO",
    hard: "DIFFICILE",
    start: "INIZIA",
    gameOver: "GAME OVER",
    maxCombo: "MAX COMBO",
    accuracy: "PRECISIONE",
    restart: "RIAVVIA",
    perfect: "PERFETTO!",
    great: "OTTIMO!",
    good: "BUONO",
    poor: "SCARSO",
    settings: "IMPOSTAZIONI",
    sound: "Suono",
    particles: "Particelle",
    aiMode: "Modalità IA",
    effects: "Effetti",
    back: "INDIETRO",
    developer: "SVILUPPATORE",
    devMode: "Modalità Dev",
    infinite: "Blocchi Infiniti",
    disableCss: "Disabilita CSS",
    godMode: "Modalità Dio",
    zeroG: "Gravità Zero",
    resetScores: "Resetta Punteggi",
    instantWin: "Vittoria Istantanea"
  },
  ja: {
    title: "スタックマスター",
    score: "スコア",
    best: "ベスト",
    combo: "コンボ",
    easy: "簡単",
    medium: "普通",
    hard: "難しい",
    start: "スタート",
    gameOver: "ゲームオーバー",
    maxCombo: "最大コンボ",
    accuracy: "精度",
    restart: "再開する",
    perfect: "完璧！",
    great: "素晴らしい！",
    good: "良い",
    poor: "悪い",
    settings: "設定",
    sound: "音声",
    particles: "パーティクル",
    aiMode: "AIモード",
    effects: "効果",
    back: "戻る",
    developer: "開発者",
    devMode: "開発モード",
    infinite: "無限ブロック",
    disableCss: "CSS無効",
    godMode: "ゴッドモード",
    zeroG: "無重力",
    resetScores: "スコアリセット",
    instantWin: "即時勝利"
  },
  ko: {
    title: "스택 마스터",
    score: "점수",
    best: "최고",
    combo: "콤보",
    easy: "쉬움",
    medium: "보통",
    hard: "어려움",
    start: "시작",
    gameOver: "게임 오버",
    maxCombo: "최대 콤보",
    accuracy: "정확도",
    restart: "재시작",
    perfect: "완벽함!",
    great: "훌륭함!",
    good: "좋음",
    poor: "나쁨",
    settings: "설정",
    sound: "소리",
    particles: "입자",
    aiMode: "AI 모드",
    effects: "효과",
    back: "뒤로",
    developer: "개발자",
    devMode: "개발 모드",
    infinite: "무한 블록",
    disableCss: "CSS 비활성화",
    godMode: "신 모드",
    zeroG: "무중력",
    resetScores: "점수 초기화",
    instantWin: "즉시 승리"
  },
  zh: {
    title: "堆叠大师",
    score: "分数",
    best: "最佳",
    combo: "连击",
    easy: "简单",
    medium: "中等",
    hard: "困难",
    start: "开始",
    gameOver: "游戏结束",
    maxCombo: "最大连击",
    accuracy: "准确率",
    restart: "重新开始",
    perfect: "完美!",
    great: "很好!",
    good: "好",
    poor: "差",
    settings: "设置",
    sound: "声音",
    particles: "粒子",
    aiMode: "AI模式",
    effects: "效果",
    back: "返回",
    developer: "开发者",
    devMode: "开发模式",
    infinite: "无限方块",
    disableCss: "禁用CSS",
    godMode: "上帝模式",
    zeroG: "零重力",
    resetScores: "重置分数",
    instantWin: "立即胜利"
  }
};

let currentLanguage = 'es';
const PRECISION = {
  PERFECT: { threshold: 0.95, text: "", class: 'perfect', points: 10 },
  GREAT: { threshold: 0.8, text: "", class: 'great', points: 7 },
  GOOD: { threshold: 0.5, text: "", class: 'good', points: 4 },
  POOR: { threshold: 0, text: "", class: 'poor', points: 1 }
};

function setLanguage(lang) {
  currentLanguage = lang;
  document.querySelectorAll('[data-i18n]').forEach(element => {
    const key = element.getAttribute('data-i18n');
    if (translations[lang]?.[key]) element.textContent = translations[lang][key];
  });
  Object.keys(PRECISION).forEach(p => {
    PRECISION[p].text = translations[lang][p.toLowerCase()];
  });
}